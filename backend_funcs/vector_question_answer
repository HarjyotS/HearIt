from read_pdf import read_pdf
from langchain_community.document_loaders import TextLoader
from langchain_openai import OpenAIEmbeddings
from langchain_text_splitters import CharacterTextSplitter
from langchain_chroma import Chroma

with open("api_key.txt", "r") as f:
    keys = f.read().split(",")
    elevenlabs_api_key = keys[0]
    openai_api_key = keys[1][:-1]

def vector_question_answer(file_path, query):
    pages = read_pdf(file_path)

    text_splitter = CharacterTextSplitter(chunk_size=1000, chunk_overlap=0)
    documents = text_splitter.split_documents(pages)
    db = Chroma.from_documents(documents, OpenAIEmbeddings(api_key=openai_api_key))
    docs = db.similarity_search(query)
    return docs[0].page_content
